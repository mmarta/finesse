<!DOCTYPE html>
<html>
	<head>
		<title>Finesse Test Page</title>
		<meta charset="utf-8" />
	</head>
	<body>
		<div id="placeForDisplay1"></div>
		<script src="finesse.js"></script>
		<script>
			//Set up Finesse display
			var display1 = Finesse.createPageDisplay(224, 256);
			Finesse.addPageDisplayToElement(display1, 'placeForDisplay1');

			//Set up other vars
			var bgX = 0, bgY = 0;
			var bgColor = Finesse.createRGBColorHexString(0, 0, 64);
			var sprite = new Image(),
				tile = new Image(),
				bg = new Image();
			sprite.src = 'sprite.png';
			tile.src = 'tile.png';
			bg.src = 'bells-whistles-3.png';
			bg.width = 224;
			bg.height = 280;

			var tileArrayA = [
				[0, 0], [0, 0], [0, 0], [0, 0],
				[1, 1], [0, 0], [0, 0], [1, 1],
				[1, 1], [1, 1], [1, 1], [1, 1],
				[1, 1], [0, 0], [0, 0], [1, 1]
			];

			var tileArrayB = [
				[0, 0], [0, 0], [0, 0], [0, 0],
				[1, 3], [0, 0], [0, 0], [1, 3],
				[1, 3], [1, 3], [1, 3], [1, 3],
				[1, 3], [0, 0], [0, 0], [1, 3]
			];

			Finesse.registerTiledBackgroundLayer(display1, 'rows', tile, tileArrayB, 8, 4, 4, true);
			Finesse.registerTiledBackgroundLayer(display1, 'behindRows', tile, tileArrayA, 8, 4, 4, true);
			Finesse.registerFullBackgroundLayer(display1, 'twinbee', bg, true);

			Finesse.registerKeyboard();

			//Actual Finesse program
			var programLoop = function() {
				if(Finesse.keys[40]) {
					bgY -= 2;

					if(bgY < 0) {
						bgY = 126;
					}
				}

				Finesse.scrollBackground(display1, 'twinbee', 35, 128);
				Finesse.scrollBackground(display1, 'behindRows', bgX >> 1, bgY >> 1);
				Finesse.scrollBackground(display1, 'rows', bgX, bgY);

				//Finesse.clearDisplayPage(display1, bgColor);
				Finesse.drawBackgroundLayer(display1, 'twinbee');
				Finesse.drawBackgroundLayer(display1, 'behindRows');
				Finesse.drawBackgroundLayer(display1, 'rows');
				Finesse.drawSpriteToPageDisplay(display1, sprite, 0, 0, 108, 224, 8, 8);
				Finesse.renderPageDisplay(display1);
				Finesse.waitNextFrame();
			};

			//Resize window event
			window.onresize = function() {
				Finesse.resizeSimulatedFullScreenPageDisplay(display1);
			}

			if(!Finesse.registerUpdateMode(Finesse.UPDATE_MODE_SCREEN_SYNC)) {
				throw "ERROR: No good!";
			}
			Finesse.simulateFullScreenPageDisplay(display1);
			Finesse.runPogramLoop(programLoop);
		</script>
</html>
